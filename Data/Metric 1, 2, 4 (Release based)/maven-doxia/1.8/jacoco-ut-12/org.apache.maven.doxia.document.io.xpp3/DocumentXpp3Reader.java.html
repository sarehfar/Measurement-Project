<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DocumentXpp3Reader.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Doxia :: Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.maven.doxia.document.io.xpp3</a> &gt; <span class="el_source">DocumentXpp3Reader.java</span></div><h1>DocumentXpp3Reader.java</h1><pre class="source lang-java linenums">// =================== DO NOT EDIT THIS FILE ====================
// Generated by Modello 1.8.1,
// any modifications will be overwritten.
// ==============================================================

package org.apache.maven.doxia.document.io.xpp3;

  //---------------------------------/
 //- Imported classes and packages -/
//---------------------------------/

import java.io.IOException;
import java.io.InputStream;
import java.io.Reader;
import java.text.DateFormat;
import org.apache.maven.doxia.document.DocumentAuthor;
import org.apache.maven.doxia.document.DocumentCover;
import org.apache.maven.doxia.document.DocumentHyperlinkBehaviour;
import org.apache.maven.doxia.document.DocumentMeta;
import org.apache.maven.doxia.document.DocumentModel;
import org.apache.maven.doxia.document.DocumentStatistic;
import org.apache.maven.doxia.document.DocumentTOC;
import org.apache.maven.doxia.document.DocumentTOCItem;
import org.apache.maven.doxia.document.DocumentTemplate;
import org.codehaus.plexus.util.ReaderFactory;
import org.codehaus.plexus.util.xml.pull.EntityReplacementMap;
import org.codehaus.plexus.util.xml.pull.MXParser;
import org.codehaus.plexus.util.xml.pull.XmlPullParser;
import org.codehaus.plexus.util.xml.pull.XmlPullParserException;

/**
 * Class DocumentXpp3Reader.
 * 
 * @version $Revision$ $Date$
 */
@SuppressWarnings( &quot;all&quot; )
<span class="fc" id="L37">public class DocumentXpp3Reader</span>
{

      //--------------------------/
     //- Class/Member Variables -/
    //--------------------------/

    /**
     * If set the parser will be loaded with all single characters
     * from the XHTML specification.
     * The entities used:
     * &lt;ul&gt;
     * &lt;li&gt;http://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent&lt;/li&gt;
     * &lt;li&gt;http://www.w3.org/TR/xhtml1/DTD/xhtml-special.ent&lt;/li&gt;
     * &lt;li&gt;http://www.w3.org/TR/xhtml1/DTD/xhtml-symbol.ent&lt;/li&gt;
     * &lt;/ul&gt;
     */
<span class="fc" id="L54">    private boolean addDefaultEntities = true;</span>


      //-----------/
     //- Methods -/
    //-----------/

    /**
     * Method checkFieldWithDuplicate.
     * 
     * @param parser
     * @param parsed
     * @param alias
     * @param tagName
     * @throws XmlPullParserException
     * @return boolean
     */
    private boolean checkFieldWithDuplicate( XmlPullParser parser, String tagName, String alias, java.util.Set parsed )
        throws XmlPullParserException
    {
<span class="pc bpc" id="L74" title="1 of 4 branches missed.">        if ( !( parser.getName().equals( tagName ) || parser.getName().equals( alias ) ) )</span>
        {
<span class="fc" id="L76">            return false;</span>
        }
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">        if ( !parsed.add( tagName ) )</span>
        {
<span class="nc" id="L80">            throw new XmlPullParserException( &quot;Duplicated tag: '&quot; + tagName + &quot;'&quot;, parser, null );</span>
        }
<span class="fc" id="L82">        return true;</span>
    } //-- boolean checkFieldWithDuplicate( XmlPullParser, String, String, java.util.Set )

    /**
     * Method checkUnknownAttribute.
     * 
     * @param parser
     * @param strict
     * @param tagName
     * @param attribute
     * @throws XmlPullParserException
     * @throws IOException
     */
    private void checkUnknownAttribute( XmlPullParser parser, String attribute, String tagName, boolean strict )
        throws XmlPullParserException, IOException
    {
        // strictXmlAttributes = true for model: if strict == true, not only elements are checked but attributes too
<span class="nc bnc" id="L99" title="All 2 branches missed.">        if ( strict )</span>
        {
<span class="nc" id="L101">            throw new XmlPullParserException( &quot;Unknown attribute '&quot; + attribute + &quot;' for tag '&quot; + tagName + &quot;'&quot;, parser, null );</span>
        }
<span class="nc" id="L103">    } //-- void checkUnknownAttribute( XmlPullParser, String, String, boolean )</span>

    /**
     * Method checkUnknownElement.
     * 
     * @param parser
     * @param strict
     * @throws XmlPullParserException
     * @throws IOException
     */
    private void checkUnknownElement( XmlPullParser parser, boolean strict )
        throws XmlPullParserException, IOException
    {
<span class="nc bnc" id="L116" title="All 2 branches missed.">        if ( strict )</span>
        {
<span class="nc" id="L118">            throw new XmlPullParserException( &quot;Unrecognised tag: '&quot; + parser.getName() + &quot;'&quot;, parser, null );</span>
        }

<span class="nc bnc" id="L121" title="All 2 branches missed.">        for ( int unrecognizedTagCount = 1; unrecognizedTagCount &gt; 0; )</span>
        {
<span class="nc" id="L123">            int eventType = parser.next();</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">            if ( eventType == XmlPullParser.START_TAG )</span>
            {
<span class="nc" id="L126">                unrecognizedTagCount++;</span>
            }
<span class="nc bnc" id="L128" title="All 2 branches missed.">            else if ( eventType == XmlPullParser.END_TAG )</span>
            {
<span class="nc" id="L130">                unrecognizedTagCount--;</span>
            }
<span class="nc" id="L132">        }</span>
<span class="nc" id="L133">    } //-- void checkUnknownElement( XmlPullParser, boolean )</span>

    /**
     * Returns the state of the &quot;add default entities&quot; flag.
     * 
     * @return boolean
     */
    public boolean getAddDefaultEntities()
    {
<span class="nc" id="L142">        return addDefaultEntities;</span>
    } //-- boolean getAddDefaultEntities()

    /**
     * Method getBooleanValue.
     * 
     * @param s
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return boolean
     */
    private boolean getBooleanValue( String s, String attribute, XmlPullParser parser )
        throws XmlPullParserException
    {
<span class="nc" id="L157">        return getBooleanValue( s, attribute, parser, null );</span>
    } //-- boolean getBooleanValue( String, String, XmlPullParser )

    /**
     * Method getBooleanValue.
     * 
     * @param s
     * @param defaultValue
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return boolean
     */
    private boolean getBooleanValue( String s, String attribute, XmlPullParser parser, String defaultValue )
        throws XmlPullParserException
    {
<span class="pc bpc" id="L173" title="2 of 4 branches missed.">        if ( s != null &amp;&amp; s.length() != 0 )</span>
        {
<span class="fc" id="L175">            return Boolean.valueOf( s ).booleanValue();</span>
        }
<span class="nc bnc" id="L177" title="All 2 branches missed.">        if ( defaultValue != null )</span>
        {
<span class="nc" id="L179">            return Boolean.valueOf( defaultValue ).booleanValue();</span>
        }
<span class="nc" id="L181">        return false;</span>
    } //-- boolean getBooleanValue( String, String, XmlPullParser, String )

    /**
     * Method getByteValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return byte
     */
    private byte getByteValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L197" title="All 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="nc" id="L201">                return Byte.valueOf( s ).byteValue();</span>
            }
<span class="nc" id="L203">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L205" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L207">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be a byte&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L211">        return 0;</span>
    } //-- byte getByteValue( String, String, XmlPullParser, boolean )

    /**
     * Method getCharacterValue.
     * 
     * @param s
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return char
     */
    private char getCharacterValue( String s, String attribute, XmlPullParser parser )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L226" title="All 2 branches missed.">        if ( s != null )</span>
        {
<span class="nc" id="L228">            return s.charAt( 0 );</span>
        }
<span class="nc" id="L230">        return 0;</span>
    } //-- char getCharacterValue( String, String, XmlPullParser )

    /**
     * Method getDateValue.
     * 
     * @param s
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return Date
     */
    private java.util.Date getDateValue( String s, String attribute, XmlPullParser parser )
        throws XmlPullParserException
    {
<span class="nc" id="L245">        return getDateValue( s, attribute, null, parser );</span>
    } //-- java.util.Date getDateValue( String, String, XmlPullParser )

    /**
     * Method getDateValue.
     * 
     * @param s
     * @param parser
     * @param dateFormat
     * @param attribute
     * @throws XmlPullParserException
     * @return Date
     */
    private java.util.Date getDateValue( String s, String attribute, String dateFormat, XmlPullParser parser )
        throws XmlPullParserException
    {
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">        if ( s != null )</span>
        {
<span class="fc" id="L263">            String effectiveDateFormat = dateFormat;</span>
<span class="pc bpc" id="L264" title="1 of 2 branches missed.">            if ( dateFormat == null )</span>
            {
<span class="fc" id="L266">                effectiveDateFormat = &quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;;</span>
            }
<span class="pc bpc" id="L268" title="1 of 2 branches missed.">            if ( &quot;long&quot;.equals( effectiveDateFormat ) )</span>
            {
                try
                {
<span class="nc" id="L272">                    return new java.util.Date( Long.parseLong( s ) );</span>
                }
<span class="nc" id="L274">                catch ( NumberFormatException e )</span>
                {
<span class="nc" id="L276">                    throw new XmlPullParserException( e.getMessage(), parser, e );</span>
                }
            }
            else
            {
                try
                {
<span class="fc" id="L283">                    DateFormat dateParser = new java.text.SimpleDateFormat( effectiveDateFormat, java.util.Locale.US );</span>
<span class="fc" id="L284">                    return dateParser.parse( s );</span>
                }
<span class="nc" id="L286">                catch ( java.text.ParseException e )</span>
                {
<span class="nc" id="L288">                    throw new XmlPullParserException( e.getMessage(), parser, e );</span>
                }
            }
        }
<span class="nc" id="L292">        return null;</span>
    } //-- java.util.Date getDateValue( String, String, String, XmlPullParser )

    /**
     * Method getDoubleValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return double
     */
    private double getDoubleValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L308" title="All 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="nc" id="L312">                return Double.valueOf( s ).doubleValue();</span>
            }
<span class="nc" id="L314">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L316" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L318">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be a floating point number&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L322">        return 0;</span>
    } //-- double getDoubleValue( String, String, XmlPullParser, boolean )

    /**
     * Method getFloatValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return float
     */
    private float getFloatValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L338" title="All 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="nc" id="L342">                return Float.valueOf( s ).floatValue();</span>
            }
<span class="nc" id="L344">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L346" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L348">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be a floating point number&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L352">        return 0;</span>
    } //-- float getFloatValue( String, String, XmlPullParser, boolean )

    /**
     * Method getIntegerValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return int
     */
    private int getIntegerValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L368" title="All 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="nc" id="L372">                return Integer.valueOf( s ).intValue();</span>
            }
<span class="nc" id="L374">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L376" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L378">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be an integer&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L382">        return 0;</span>
    } //-- int getIntegerValue( String, String, XmlPullParser, boolean )

    /**
     * Method getLongValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return long
     */
    private long getLongValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="pc bpc" id="L398" title="1 of 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="fc" id="L402">                return Long.valueOf( s ).longValue();</span>
            }
<span class="nc" id="L404">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L406" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L408">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be a long integer&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L412">        return 0;</span>
    } //-- long getLongValue( String, String, XmlPullParser, boolean )

    /**
     * Method getRequiredAttributeValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return String
     */
    private String getRequiredAttributeValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L428" title="All 2 branches missed.">        if ( s == null )</span>
        {
<span class="nc bnc" id="L430" title="All 2 branches missed.">            if ( strict )</span>
            {
<span class="nc" id="L432">                throw new XmlPullParserException( &quot;Missing required value for attribute '&quot; + attribute + &quot;'&quot;, parser, null );</span>
            }
        }
<span class="nc" id="L435">        return s;</span>
    } //-- String getRequiredAttributeValue( String, String, XmlPullParser, boolean )

    /**
     * Method getShortValue.
     * 
     * @param s
     * @param strict
     * @param parser
     * @param attribute
     * @throws XmlPullParserException
     * @return short
     */
    private short getShortValue( String s, String attribute, XmlPullParser parser, boolean strict )
        throws XmlPullParserException
    {
<span class="nc bnc" id="L451" title="All 2 branches missed.">        if ( s != null )</span>
        {
            try
            {
<span class="nc" id="L455">                return Short.valueOf( s ).shortValue();</span>
            }
<span class="nc" id="L457">            catch ( NumberFormatException nfe )</span>
            {
<span class="nc bnc" id="L459" title="All 2 branches missed.">                if ( strict )</span>
                {
<span class="nc" id="L461">                    throw new XmlPullParserException( &quot;Unable to parse element '&quot; + attribute + &quot;', must be a short integer&quot;, parser, nfe );</span>
                }
            }
        }
<span class="nc" id="L465">        return 0;</span>
    } //-- short getShortValue( String, String, XmlPullParser, boolean )

    /**
     * Method getTrimmedValue.
     * 
     * @param s
     * @return String
     */
    private String getTrimmedValue( String s )
    {
<span class="pc bpc" id="L476" title="1 of 2 branches missed.">        if ( s != null )</span>
        {
<span class="fc" id="L478">            s = s.trim();</span>
        }
<span class="fc" id="L480">        return s;</span>
    } //-- String getTrimmedValue( String )

    /**
     * Method nextTag.
     * 
     * @param parser
     * @throws IOException
     * @throws XmlPullParserException
     * @return int
     */
    private int nextTag( XmlPullParser parser )
        throws IOException, XmlPullParserException
    {
<span class="nc" id="L494">        int eventType = parser.next();</span>
<span class="nc bnc" id="L495" title="All 2 branches missed.">        if ( eventType == XmlPullParser.TEXT )</span>
        {
<span class="nc" id="L497">            eventType = parser.next();</span>
        }
<span class="nc bnc" id="L499" title="All 4 branches missed.">        if ( eventType != XmlPullParser.START_TAG &amp;&amp; eventType != XmlPullParser.END_TAG )</span>
        {
<span class="nc" id="L501">            throw new XmlPullParserException( &quot;expected START_TAG or END_TAG not &quot; + XmlPullParser.TYPES[eventType], parser, null );</span>
        }
<span class="nc" id="L503">        return eventType;</span>
    } //-- int nextTag( XmlPullParser )

    /**
     * @see ReaderFactory#newXmlReader
     * 
     * @param reader
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    public DocumentModel read( Reader reader, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="pc bpc" id="L518" title="1 of 2 branches missed.">        XmlPullParser parser = addDefaultEntities ? new MXParser(EntityReplacementMap.defaultEntityReplacementMap) : new MXParser( );</span>

<span class="fc" id="L520">        parser.setInput( reader );</span>


<span class="fc" id="L523">        return read( parser, strict );</span>
    } //-- DocumentModel read( Reader, boolean )

    /**
     * @see ReaderFactory#newXmlReader
     * 
     * @param reader
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    public DocumentModel read( Reader reader )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L537">        return read( reader, true );</span>
    } //-- DocumentModel read( Reader )

    /**
     * Method read.
     * 
     * @param in
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    public DocumentModel read( InputStream in, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="nc" id="L552">        return read( ReaderFactory.newXmlReader( in ), strict );</span>
    } //-- DocumentModel read( InputStream, boolean )

    /**
     * Method read.
     * 
     * @param in
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    public DocumentModel read( InputStream in )
        throws IOException, XmlPullParserException
    {
<span class="nc" id="L566">        return read( ReaderFactory.newXmlReader( in ) );</span>
    } //-- DocumentModel read( InputStream )

    /**
     * Method parseDocumentAuthor.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentAuthor
     */
    private DocumentAuthor parseDocumentAuthor( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L581">        String tagName = parser.getName();</span>
<span class="fc" id="L582">        DocumentAuthor documentAuthor = new DocumentAuthor();</span>
<span class="pc bpc" id="L583" title="1 of 2 branches missed.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="nc" id="L585">            String name = parser.getAttributeName( i );</span>
<span class="nc" id="L586">            String value = parser.getAttributeValue( i );</span>

<span class="nc bnc" id="L588" title="All 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
            else
            {
<span class="nc" id="L594">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L597">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L598" title="1 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="fc bfc" id="L600" title="All 2 branches covered.">            if ( checkFieldWithDuplicate( parser, &quot;firstName&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L602">                documentAuthor.setFirstName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L604" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;lastName&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L606">                documentAuthor.setLastName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L608" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;name&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L610">                documentAuthor.setName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L612" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;initials&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L614">                documentAuthor.setInitials( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L616" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;title&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L618">                documentAuthor.setTitle( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L620" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;position&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L622">                documentAuthor.setPosition( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L624" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;email&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L626">                documentAuthor.setEmail( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L628" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;phoneNumber&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L630">                documentAuthor.setPhoneNumber( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L632" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;faxNumber&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L634">                documentAuthor.setFaxNumber( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L636" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;companyName&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L638">                documentAuthor.setCompanyName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L640" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;street&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L642">                documentAuthor.setStreet( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L644" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;city&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L646">                documentAuthor.setCity( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L648" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;postalCode&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L650">                documentAuthor.setPostalCode( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L652" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;country&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L654">                documentAuthor.setCountry( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="pc bpc" id="L656" title="1 of 2 branches missed.">            else if ( checkFieldWithDuplicate( parser, &quot;state&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L658">                documentAuthor.setState( getTrimmedValue( parser.nextText() ) );</span>
            }
            else
            {
<span class="nc" id="L662">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L665">        return documentAuthor;</span>
    } //-- DocumentAuthor parseDocumentAuthor( XmlPullParser, boolean )

    /**
     * Method parseDocumentCover.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentCover
     */
    private DocumentCover parseDocumentCover( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L680">        String tagName = parser.getName();</span>
<span class="fc" id="L681">        DocumentCover documentCover = new DocumentCover();</span>
<span class="pc bpc" id="L682" title="1 of 2 branches missed.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="nc" id="L684">            String name = parser.getAttributeName( i );</span>
<span class="nc" id="L685">            String value = parser.getAttributeValue( i );</span>

<span class="nc bnc" id="L687" title="All 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
            else
            {
<span class="nc" id="L693">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L696">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L697" title="1 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="fc bfc" id="L699" title="All 2 branches covered.">            if ( checkFieldWithDuplicate( parser, &quot;coverTitle&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L701">                documentCover.setCoverTitle( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L703" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;coverSubTitle&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L705">                documentCover.setCoverSubTitle( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L707" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;coverVersion&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L709">                documentCover.setCoverVersion( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L711" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;coverType&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L713">                documentCover.setCoverType( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L715" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;coverDate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L717">                String dateFormat = null;</span>
<span class="fc" id="L718">                documentCover.setCoverDate( getDateValue( getTrimmedValue( parser.nextText() ), &quot;coverDate&quot;, dateFormat, parser ) );</span>
<span class="fc" id="L719">            }</span>
<span class="fc bfc" id="L720" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;coverdate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L722">                documentCover.setCoverdate( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L724" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;authors&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L726">                java.util.List authors = new java.util.ArrayList/*&lt;DocumentAuthor&gt;*/();</span>
<span class="fc" id="L727">                documentCover.setAuthors( authors );</span>
<span class="fc bfc" id="L728" title="All 2 branches covered.">                while ( parser.nextTag() == XmlPullParser.START_TAG )</span>
                {
<span class="pc bpc" id="L730" title="1 of 2 branches missed.">                    if ( &quot;author&quot;.equals( parser.getName() ) )</span>
                    {
<span class="fc" id="L732">                        authors.add( parseDocumentAuthor( parser, strict ) );</span>
                    }
                    else
                    {
<span class="nc" id="L736">                        checkUnknownElement( parser, strict );</span>
                    }
                }
<span class="fc" id="L739">            }</span>
<span class="fc bfc" id="L740" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;author&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L742">                documentCover.setAuthor( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L744" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;projectName&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L746">                documentCover.setProjectName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L748" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;projectLogo&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L750">                documentCover.setProjectLogo( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L752" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;companyName&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L754">                documentCover.setCompanyName( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="pc bpc" id="L756" title="1 of 2 branches missed.">            else if ( checkFieldWithDuplicate( parser, &quot;companyLogo&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L758">                documentCover.setCompanyLogo( getTrimmedValue( parser.nextText() ) );</span>
            }
            else
            {
<span class="nc" id="L762">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L765">        return documentCover;</span>
    } //-- DocumentCover parseDocumentCover( XmlPullParser, boolean )

    /**
     * Method parseDocumentHyperlinkBehaviour.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentHyperlinkBehaviour
     */
    private DocumentHyperlinkBehaviour parseDocumentHyperlinkBehaviour( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L780">        String tagName = parser.getName();</span>
<span class="fc" id="L781">        DocumentHyperlinkBehaviour documentHyperlinkBehaviour = new DocumentHyperlinkBehaviour();</span>
<span class="fc bfc" id="L782" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L784">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L785">            String value = parser.getAttributeValue( i );</span>

<span class="pc bpc" id="L787" title="1 of 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="pc bpc" id="L791" title="1 of 2 branches missed.">            else if ( &quot;targetFrame&quot;.equals( name ) )</span>
            {
<span class="fc" id="L793">                documentHyperlinkBehaviour.setTargetFrame( getTrimmedValue( value ) );</span>
            }
            else
            {
<span class="nc" id="L797">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L800">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L801" title="2 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="nc" id="L803">            checkUnknownElement( parser, strict );</span>
        }
<span class="fc" id="L805">        return documentHyperlinkBehaviour;</span>
    } //-- DocumentHyperlinkBehaviour parseDocumentHyperlinkBehaviour( XmlPullParser, boolean )

    /**
     * Method parseDocumentMeta.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentMeta
     */
    private DocumentMeta parseDocumentMeta( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L820">        String tagName = parser.getName();</span>
<span class="fc" id="L821">        DocumentMeta documentMeta = new DocumentMeta();</span>
<span class="pc bpc" id="L822" title="1 of 2 branches missed.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="nc" id="L824">            String name = parser.getAttributeName( i );</span>
<span class="nc" id="L825">            String value = parser.getAttributeValue( i );</span>

<span class="nc bnc" id="L827" title="All 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
            else
            {
<span class="nc" id="L833">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L836">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L837" title="1 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="fc bfc" id="L839" title="All 2 branches covered.">            if ( checkFieldWithDuplicate( parser, &quot;title&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L841">                documentMeta.setTitle( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L843" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;author&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L845">                documentMeta.setAuthor( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L847" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;authors&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L849">                java.util.List authors = new java.util.ArrayList/*&lt;DocumentAuthor&gt;*/();</span>
<span class="fc" id="L850">                documentMeta.setAuthors( authors );</span>
<span class="fc bfc" id="L851" title="All 2 branches covered.">                while ( parser.nextTag() == XmlPullParser.START_TAG )</span>
                {
<span class="pc bpc" id="L853" title="1 of 2 branches missed.">                    if ( &quot;author&quot;.equals( parser.getName() ) )</span>
                    {
<span class="fc" id="L855">                        authors.add( parseDocumentAuthor( parser, strict ) );</span>
                    }
                    else
                    {
<span class="nc" id="L859">                        checkUnknownElement( parser, strict );</span>
                    }
                }
<span class="fc" id="L862">            }</span>
<span class="fc bfc" id="L863" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;subject&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L865">                documentMeta.setSubject( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="pc bpc" id="L867" title="1 of 2 branches missed.">            else if ( checkFieldWithDuplicate( parser, &quot;keywords&quot;, null, parsed ) )</span>
            {
<span class="nc" id="L869">                documentMeta.setKeywords( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L871" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;keyWords&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L873">                java.util.List keyWords = new java.util.ArrayList/*&lt;String&gt;*/();</span>
<span class="fc" id="L874">                documentMeta.setKeyWords( keyWords );</span>
<span class="fc bfc" id="L875" title="All 2 branches covered.">                while ( parser.nextTag() == XmlPullParser.START_TAG )</span>
                {
<span class="pc bpc" id="L877" title="1 of 2 branches missed.">                    if ( &quot;keyWord&quot;.equals( parser.getName() ) )</span>
                    {
<span class="fc" id="L879">                        keyWords.add( getTrimmedValue( parser.nextText() ) );</span>
                    }
                    else
                    {
<span class="nc" id="L883">                        checkUnknownElement( parser, strict );</span>
                    }
                }
<span class="fc" id="L886">            }</span>
<span class="fc bfc" id="L887" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;pageSize&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L889">                documentMeta.setPageSize( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L891" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;generator&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L893">                documentMeta.setGenerator( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L895" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;description&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L897">                documentMeta.setDescription( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L899" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;initialCreator&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L901">                documentMeta.setInitialCreator( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L903" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;creator&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L905">                documentMeta.setCreator( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L907" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;printedBy&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L909">                documentMeta.setPrintedBy( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L911" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;creationDate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L913">                String dateFormat = null;</span>
<span class="fc" id="L914">                documentMeta.setCreationDate( getDateValue( getTrimmedValue( parser.nextText() ), &quot;creationDate&quot;, dateFormat, parser ) );</span>
<span class="fc" id="L915">            }</span>
<span class="fc bfc" id="L916" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;creationdate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L918">                documentMeta.setCreationdate( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L920" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;date&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L922">                String dateFormat = null;</span>
<span class="fc" id="L923">                documentMeta.setDate( getDateValue( getTrimmedValue( parser.nextText() ), &quot;date&quot;, dateFormat, parser ) );</span>
<span class="fc" id="L924">            }</span>
<span class="fc bfc" id="L925" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;modifydate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L927">                documentMeta.setModifydate( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L929" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;printDate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L931">                String dateFormat = null;</span>
<span class="fc" id="L932">                documentMeta.setPrintDate( getDateValue( getTrimmedValue( parser.nextText() ), &quot;printDate&quot;, dateFormat, parser ) );</span>
<span class="fc" id="L933">            }</span>
<span class="fc bfc" id="L934" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;printdate&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L936">                documentMeta.setPrintdate( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L938" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;template&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L940">                documentMeta.setTemplate( parseDocumentTemplate( parser, strict ) );</span>
            }
<span class="fc bfc" id="L942" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;hyperlinkBehaviour&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L944">                documentMeta.setHyperlinkBehaviour( parseDocumentHyperlinkBehaviour( parser, strict ) );</span>
            }
<span class="fc bfc" id="L946" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;language&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L948">                documentMeta.setLanguage( getTrimmedValue( parser.nextText() ) );</span>
            }
<span class="fc bfc" id="L950" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;editingCycles&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L952">                documentMeta.setEditingCycles( getLongValue( getTrimmedValue( parser.nextText() ), &quot;editingCycles&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L954" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;editingDuration&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L956">                documentMeta.setEditingDuration( getLongValue( getTrimmedValue( parser.nextText() ), &quot;editingDuration&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L958" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;documentStatistic&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L960">                documentMeta.setDocumentStatistic( parseDocumentStatistic( parser, strict ) );</span>
            }
<span class="fc bfc" id="L962" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;confidential&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L964">                documentMeta.setConfidential( getBooleanValue( getTrimmedValue( parser.nextText() ), &quot;confidential&quot;, parser, &quot;false&quot; ) );</span>
            }
<span class="pc bpc" id="L966" title="1 of 2 branches missed.">            else if ( checkFieldWithDuplicate( parser, &quot;draft&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L968">                documentMeta.setDraft( getBooleanValue( getTrimmedValue( parser.nextText() ), &quot;draft&quot;, parser, &quot;false&quot; ) );</span>
            }
            else
            {
<span class="nc" id="L972">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L975">        return documentMeta;</span>
    } //-- DocumentMeta parseDocumentMeta( XmlPullParser, boolean )

    /**
     * Method parseDocumentModel.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    private DocumentModel parseDocumentModel( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L990">        String tagName = parser.getName();</span>
<span class="fc" id="L991">        DocumentModel documentModel = new DocumentModel();</span>
<span class="fc bfc" id="L992" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L994">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L995">            String value = parser.getAttributeValue( i );</span>

<span class="fc bfc" id="L997" title="All 2 branches covered.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="fc bfc" id="L1001" title="All 2 branches covered.">            else if ( &quot;xmlns&quot;.equals( name ) )</span>
            {
                // ignore xmlns attribute in root class, which is a reserved attribute name
            }
<span class="pc bpc" id="L1005" title="1 of 2 branches missed.">            else if ( &quot;outputName&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1007">                documentModel.setOutputName( getTrimmedValue( value ) );</span>
            }
            else
            {
<span class="nc" id="L1011">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L1014">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L1015" title="1 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="fc bfc" id="L1017" title="All 2 branches covered.">            if ( checkFieldWithDuplicate( parser, &quot;meta&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L1019">                documentModel.setMeta( parseDocumentMeta( parser, strict ) );</span>
            }
<span class="fc bfc" id="L1021" title="All 2 branches covered.">            else if ( checkFieldWithDuplicate( parser, &quot;toc&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L1023">                documentModel.setToc( parseDocumentTOC( parser, strict ) );</span>
            }
<span class="pc bpc" id="L1025" title="1 of 2 branches missed.">            else if ( checkFieldWithDuplicate( parser, &quot;cover&quot;, null, parsed ) )</span>
            {
<span class="fc" id="L1027">                documentModel.setCover( parseDocumentCover( parser, strict ) );</span>
            }
            else
            {
<span class="nc" id="L1031">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L1034">        return documentModel;</span>
    } //-- DocumentModel parseDocumentModel( XmlPullParser, boolean )

    /**
     * Method parseDocumentStatistic.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentStatistic
     */
    private DocumentStatistic parseDocumentStatistic( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L1049">        String tagName = parser.getName();</span>
<span class="fc" id="L1050">        DocumentStatistic documentStatistic = new DocumentStatistic();</span>
<span class="fc bfc" id="L1051" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L1053">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L1054">            String value = parser.getAttributeValue( i );</span>

<span class="pc bpc" id="L1056" title="1 of 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="fc bfc" id="L1060" title="All 2 branches covered.">            else if ( &quot;pageCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1062">                documentStatistic.setPageCount( getLongValue( getTrimmedValue( value ), &quot;pageCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1064" title="All 2 branches covered.">            else if ( &quot;tableCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1066">                documentStatistic.setTableCount( getLongValue( getTrimmedValue( value ), &quot;tableCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1068" title="All 2 branches covered.">            else if ( &quot;drawCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1070">                documentStatistic.setDrawCount( getLongValue( getTrimmedValue( value ), &quot;drawCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1072" title="All 2 branches covered.">            else if ( &quot;imageCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1074">                documentStatistic.setImageCount( getLongValue( getTrimmedValue( value ), &quot;imageCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1076" title="All 2 branches covered.">            else if ( &quot;objectCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1078">                documentStatistic.setObjectCount( getLongValue( getTrimmedValue( value ), &quot;objectCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1080" title="All 2 branches covered.">            else if ( &quot;oleObjectCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1082">                documentStatistic.setOleObjectCount( getLongValue( getTrimmedValue( value ), &quot;oleObjectCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1084" title="All 2 branches covered.">            else if ( &quot;paragraphCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1086">                documentStatistic.setParagraphCount( getLongValue( getTrimmedValue( value ), &quot;paragraphCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1088" title="All 2 branches covered.">            else if ( &quot;wordCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1090">                documentStatistic.setWordCount( getLongValue( getTrimmedValue( value ), &quot;wordCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1092" title="All 2 branches covered.">            else if ( &quot;characterCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1094">                documentStatistic.setCharacterCount( getLongValue( getTrimmedValue( value ), &quot;characterCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1096" title="All 2 branches covered.">            else if ( &quot;rowCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1098">                documentStatistic.setRowCount( getLongValue( getTrimmedValue( value ), &quot;rowCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1100" title="All 2 branches covered.">            else if ( &quot;frameCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1102">                documentStatistic.setFrameCount( getLongValue( getTrimmedValue( value ), &quot;frameCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1104" title="All 2 branches covered.">            else if ( &quot;sentenceCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1106">                documentStatistic.setSentenceCount( getLongValue( getTrimmedValue( value ), &quot;sentenceCount&quot;, parser, strict ) );</span>
            }
<span class="fc bfc" id="L1108" title="All 2 branches covered.">            else if ( &quot;syllableCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1110">                documentStatistic.setSyllableCount( getLongValue( getTrimmedValue( value ), &quot;syllableCount&quot;, parser, strict ) );</span>
            }
<span class="pc bpc" id="L1112" title="1 of 2 branches missed.">            else if ( &quot;nonWhitespaceCharacterCount&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1114">                documentStatistic.setNonWhitespaceCharacterCount( getLongValue( getTrimmedValue( value ), &quot;nonWhitespaceCharacterCount&quot;, parser, strict ) );</span>
            }
            else
            {
<span class="nc" id="L1118">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L1121">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L1122" title="2 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="nc" id="L1124">            checkUnknownElement( parser, strict );</span>
        }
<span class="fc" id="L1126">        return documentStatistic;</span>
    } //-- DocumentStatistic parseDocumentStatistic( XmlPullParser, boolean )

    /**
     * Method parseDocumentTOC.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentTOC
     */
    private DocumentTOC parseDocumentTOC( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L1141">        String tagName = parser.getName();</span>
<span class="fc" id="L1142">        DocumentTOC documentTOC = new DocumentTOC();</span>
<span class="fc bfc" id="L1143" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L1145">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L1146">            String value = parser.getAttributeValue( i );</span>

<span class="pc bpc" id="L1148" title="1 of 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="pc bpc" id="L1152" title="1 of 2 branches missed.">            else if ( &quot;name&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1154">                documentTOC.setName( getTrimmedValue( value ) );</span>
            }
<span class="nc bnc" id="L1156" title="All 2 branches missed.">            else if ( &quot;depth&quot;.equals( name ) )</span>
            {
<span class="nc" id="L1158">                documentTOC.setDepth( getIntegerValue( getTrimmedValue( value ), &quot;depth&quot;, parser, strict ) );</span>
            }
            else
            {
<span class="nc" id="L1162">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L1165">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L1166" title="1 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="pc bpc" id="L1168" title="1 of 2 branches missed.">            if ( &quot;item&quot;.equals( parser.getName() ) )</span>
            {
<span class="fc" id="L1170">                java.util.List items = documentTOC.getItems();</span>
<span class="pc bpc" id="L1171" title="1 of 2 branches missed.">                if ( items == null )</span>
                {
<span class="nc" id="L1173">                    items = new java.util.ArrayList/*&lt;DocumentTOCItem&gt;*/();</span>
<span class="nc" id="L1174">                    documentTOC.setItems( items );</span>
                }
<span class="fc" id="L1176">                items.add( parseDocumentTOCItem( parser, strict ) );</span>
<span class="fc" id="L1177">            }</span>
            else
            {
<span class="nc" id="L1180">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L1183">        return documentTOC;</span>
    } //-- DocumentTOC parseDocumentTOC( XmlPullParser, boolean )

    /**
     * Method parseDocumentTOCItem.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentTOCItem
     */
    private DocumentTOCItem parseDocumentTOCItem( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L1198">        String tagName = parser.getName();</span>
<span class="fc" id="L1199">        DocumentTOCItem documentTOCItem = new DocumentTOCItem();</span>
<span class="fc bfc" id="L1200" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L1202">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L1203">            String value = parser.getAttributeValue( i );</span>

<span class="pc bpc" id="L1205" title="1 of 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="fc bfc" id="L1209" title="All 2 branches covered.">            else if ( &quot;name&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1211">                documentTOCItem.setName( getTrimmedValue( value ) );</span>
            }
<span class="pc bpc" id="L1213" title="1 of 2 branches missed.">            else if ( &quot;ref&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1215">                documentTOCItem.setRef( getTrimmedValue( value ) );</span>
            }
<span class="nc bnc" id="L1217" title="All 2 branches missed.">            else if ( &quot;collapse&quot;.equals( name ) )</span>
            {
<span class="nc" id="L1219">                documentTOCItem.setCollapse( getBooleanValue( getTrimmedValue( value ), &quot;collapse&quot;, parser, &quot;false&quot; ) );</span>
            }
            else
            {
<span class="nc" id="L1223">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L1226">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L1227" title="2 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="nc bnc" id="L1229" title="All 2 branches missed.">            if ( &quot;item&quot;.equals( parser.getName() ) )</span>
            {
<span class="nc" id="L1231">                java.util.List items = documentTOCItem.getItems();</span>
<span class="nc bnc" id="L1232" title="All 2 branches missed.">                if ( items == null )</span>
                {
<span class="nc" id="L1234">                    items = new java.util.ArrayList/*&lt;DocumentTOCItem&gt;*/();</span>
<span class="nc" id="L1235">                    documentTOCItem.setItems( items );</span>
                }
<span class="nc" id="L1237">                items.add( parseDocumentTOCItem( parser, strict ) );</span>
<span class="nc" id="L1238">            }</span>
            else
            {
<span class="nc" id="L1241">                checkUnknownElement( parser, strict );</span>
            }
        }
<span class="fc" id="L1244">        return documentTOCItem;</span>
    } //-- DocumentTOCItem parseDocumentTOCItem( XmlPullParser, boolean )

    /**
     * Method parseDocumentTemplate.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentTemplate
     */
    private DocumentTemplate parseDocumentTemplate( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L1259">        String tagName = parser.getName();</span>
<span class="fc" id="L1260">        DocumentTemplate documentTemplate = new DocumentTemplate();</span>
<span class="fc bfc" id="L1261" title="All 2 branches covered.">        for ( int i = parser.getAttributeCount() - 1; i &gt;= 0; i-- )</span>
        {
<span class="fc" id="L1263">            String name = parser.getAttributeName( i );</span>
<span class="fc" id="L1264">            String value = parser.getAttributeValue( i );</span>

<span class="pc bpc" id="L1266" title="1 of 2 branches missed.">            if ( name.indexOf( ':' ) &gt;= 0 )</span>
            {
                // just ignore attributes with non-default namespace (for example: xmlns:xsi)
            }
<span class="fc bfc" id="L1270" title="All 2 branches covered.">            else if ( &quot;href&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1272">                documentTemplate.setHref( getTrimmedValue( value ) );</span>
            }
<span class="fc bfc" id="L1274" title="All 2 branches covered.">            else if ( &quot;title&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1276">                documentTemplate.setTitle( getTrimmedValue( value ) );</span>
            }
<span class="fc bfc" id="L1278" title="All 2 branches covered.">            else if ( &quot;date&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1280">                String dateFormat = null;</span>
<span class="fc" id="L1281">                documentTemplate.setDate( getDateValue( getTrimmedValue( value ), &quot;date&quot;, dateFormat, parser ) );</span>
<span class="fc" id="L1282">            }</span>
<span class="pc bpc" id="L1283" title="1 of 2 branches missed.">            else if ( &quot;modifydate&quot;.equals( name ) )</span>
            {
<span class="fc" id="L1285">                documentTemplate.setModifydate( getTrimmedValue( value ) );</span>
            }
            else
            {
<span class="nc" id="L1289">                checkUnknownAttribute( parser, name, tagName, strict );</span>
            }
        }
<span class="fc" id="L1292">        java.util.Set parsed = new java.util.HashSet();</span>
<span class="pc bpc" id="L1293" title="2 of 4 branches missed.">        while ( ( strict ? parser.nextTag() : nextTag( parser ) ) == XmlPullParser.START_TAG )</span>
        {
<span class="nc" id="L1295">            checkUnknownElement( parser, strict );</span>
        }
<span class="fc" id="L1297">        return documentTemplate;</span>
    } //-- DocumentTemplate parseDocumentTemplate( XmlPullParser, boolean )

    /**
     * Method read.
     * 
     * @param parser
     * @param strict
     * @throws IOException
     * @throws XmlPullParserException
     * @return DocumentModel
     */
    private DocumentModel read( XmlPullParser parser, boolean strict )
        throws IOException, XmlPullParserException
    {
<span class="fc" id="L1312">        int eventType = parser.getEventType();</span>
<span class="pc bpc" id="L1313" title="1 of 2 branches missed.">        while ( eventType != XmlPullParser.END_DOCUMENT )</span>
        {
<span class="fc bfc" id="L1315" title="All 2 branches covered.">            if ( eventType == XmlPullParser.START_TAG )</span>
            {
<span class="pc bpc" id="L1317" title="2 of 4 branches missed.">                if ( strict &amp;&amp; ! &quot;document&quot;.equals( parser.getName() ) )</span>
                {
<span class="nc" id="L1319">                    throw new XmlPullParserException( &quot;Expected root element 'document' but found '&quot; + parser.getName() + &quot;'&quot;, parser, null );</span>
                }
<span class="fc" id="L1321">                DocumentModel documentModel = parseDocumentModel( parser, strict );</span>
<span class="fc" id="L1322">                documentModel.setModelEncoding( parser.getInputEncoding() );</span>
<span class="fc" id="L1323">                return documentModel;</span>
            }
<span class="fc" id="L1325">            eventType = parser.next();</span>
        }
<span class="nc" id="L1327">        throw new XmlPullParserException( &quot;Expected root element 'document' but found no element at all: invalid XML document&quot;, parser, null );</span>
    } //-- DocumentModel read( XmlPullParser, boolean )

    /**
     * Sets the state of the &quot;add default entities&quot; flag.
     * 
     * @param addDefaultEntities
     */
    public void setAddDefaultEntities( boolean addDefaultEntities )
    {
<span class="nc" id="L1337">        this.addDefaultEntities = addDefaultEntities;</span>
<span class="nc" id="L1338">    } //-- void setAddDefaultEntities( boolean )</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>