<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GanttRenderer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JFreeChart</a> &gt; <a href="index.source.html" class="el_package">org.jfree.chart.renderer.category</a> &gt; <span class="el_source">GanttRenderer.java</span></div><h1>GanttRenderer.java</h1><pre class="source lang-java linenums">/* ===========================================================
 * JFreeChart : a free chart library for the Java(tm) platform
 * ===========================================================
 *
 * (C) Copyright 2000-2020, by Object Refinery Limited and Contributors.
 *
 * Project Info:  http://www.jfree.org/jfreechart/index.html
 *
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation; either version 2.1 of the License, or
 * (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
 * License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 * [Oracle and Java are registered trademarks of Oracle and/or its affiliates. 
 * Other names may be trademarks of their respective owners.]
 *
 * ------------------
 * GanttRenderer.java
 * ------------------
 * (C) Copyright 2003-2020, by Object Refinery Limited.
 *
 * Original Author:  David Gilbert (for Object Refinery Limited);
 * Contributor(s):   -;
 * 
 */

package org.jfree.chart.renderer.category;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.Stroke;
import java.awt.geom.Rectangle2D;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

import org.jfree.chart.axis.CategoryAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.entity.EntityCollection;
import org.jfree.chart.event.RendererChangeEvent;
import org.jfree.chart.labels.CategoryItemLabelGenerator;
import org.jfree.chart.plot.CategoryPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.ui.RectangleEdge;
import org.jfree.chart.util.PaintUtils;
import org.jfree.chart.util.Args;
import org.jfree.chart.util.SerialUtils;
import org.jfree.data.category.CategoryDataset;
import org.jfree.data.gantt.GanttCategoryDataset;

/**
 * A renderer for simple Gantt charts.  The example shown
 * here is generated by the {@code GanttDemo1.java} program
 * included in the JFreeChart Demo Collection:
 * &lt;br&gt;&lt;br&gt;
 * &lt;img src=&quot;../../../../../images/GanttRendererSample.png&quot;
 * alt=&quot;GanttRendererSample.png&quot;&gt;
 */
public class GanttRenderer extends IntervalBarRenderer
        implements Serializable {

    /** For serialization. */
    private static final long serialVersionUID = -4010349116350119512L;

    /** The paint for displaying the percentage complete. */
    private transient Paint completePaint;

    /** The paint for displaying the incomplete part of a task. */
    private transient Paint incompletePaint;

    /**
     * Controls the starting edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double startPercent;

    /**
     * Controls the ending edge of the progress indicator (expressed as a
     * percentage of the overall bar width).
     */
    private double endPercent;

    /**
     * Creates a new renderer.
     */
    public GanttRenderer() {
<span class="fc" id="L99">        super();</span>
<span class="fc" id="L100">        setIncludeBaseInRange(false);</span>
<span class="fc" id="L101">        this.completePaint = Color.GREEN;</span>
<span class="fc" id="L102">        this.incompletePaint = Color.RED;</span>
<span class="fc" id="L103">        this.startPercent = 0.35;</span>
<span class="fc" id="L104">        this.endPercent = 0.65;</span>
<span class="fc" id="L105">    }</span>

    /**
     * Returns the paint used to show the percentage complete.
     *
     * @return The paint (never {@code null}).
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getCompletePaint() {
<span class="nc" id="L115">        return this.completePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage complete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint ({@code null} not permitted).
     *
     * @see #getCompletePaint()
     */
    public void setCompletePaint(Paint paint) {
<span class="fc" id="L127">        Args.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="fc" id="L128">        this.completePaint = paint;</span>
<span class="fc" id="L129">        fireChangeEvent();</span>
<span class="fc" id="L130">    }</span>

    /**
     * Returns the paint used to show the percentage incomplete.
     *
     * @return The paint (never {@code null}).
     *
     * @see #setCompletePaint(Paint)
     */
    public Paint getIncompletePaint() {
<span class="nc" id="L140">        return this.incompletePaint;</span>
    }

    /**
     * Sets the paint used to show the percentage incomplete and sends a
     * {@link RendererChangeEvent} to all registered listeners.
     *
     * @param paint  the paint ({@code null} not permitted).
     *
     * @see #getIncompletePaint()
     */
    public void setIncompletePaint(Paint paint) {
<span class="fc" id="L152">        Args.nullNotPermitted(paint, &quot;paint&quot;);</span>
<span class="fc" id="L153">        this.incompletePaint = paint;</span>
<span class="fc" id="L154">        fireChangeEvent();</span>
<span class="fc" id="L155">    }</span>

    /**
     * Returns the position of the start of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The start percent.
     *
     * @see #setStartPercent(double)
     */
    public double getStartPercent() {
<span class="fc" id="L166">        return this.startPercent;</span>
    }

    /**
     * Sets the position of the start of the progress indicator, as a
     * percentage of the bar width, and sends a {@link RendererChangeEvent} to
     * all registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getStartPercent()
     */
    public void setStartPercent(double percent) {
<span class="fc" id="L179">        this.startPercent = percent;</span>
<span class="fc" id="L180">        fireChangeEvent();</span>
<span class="fc" id="L181">    }</span>

    /**
     * Returns the position of the end of the progress indicator, as a
     * percentage of the bar width.
     *
     * @return The end percent.
     *
     * @see #setEndPercent(double)
     */
    public double getEndPercent() {
<span class="fc" id="L192">        return this.endPercent;</span>
    }

    /**
     * Sets the position of the end of the progress indicator, as a percentage
     * of the bar width, and sends a {@link RendererChangeEvent} to all
     * registered listeners.
     *
     * @param percent  the percent.
     *
     * @see #getEndPercent()
     */
    public void setEndPercent(double percent) {
<span class="fc" id="L205">        this.endPercent = percent;</span>
<span class="fc" id="L206">        fireChangeEvent();</span>
<span class="fc" id="L207">    }</span>

    /**
     * Draws the bar for a single (series, category) data item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the dataset.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     * @param pass  the pass index.
     */
    @Override
    public void drawItem(Graphics2D g2, CategoryItemRendererState state,
            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,
            ValueAxis rangeAxis, CategoryDataset dataset, int row,
            int column, int pass) {

<span class="pc bpc" id="L229" title="1 of 2 branches missed.">         if (dataset instanceof GanttCategoryDataset) {</span>
<span class="fc" id="L230">             GanttCategoryDataset gcd = (GanttCategoryDataset) dataset;</span>
<span class="fc" id="L231">             drawTasks(g2, state, dataArea, plot, domainAxis, rangeAxis, gcd,</span>
                     row, column);
<span class="fc" id="L233">         }</span>
         else {  // let the superclass handle it...
<span class="nc" id="L235">             super.drawItem(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
                     dataset, row, column, pass);
         }

<span class="fc" id="L239">     }</span>

    /**
     * Draws the tasks/subtasks for one item.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTasks(Graphics2D g2,
                             CategoryItemRendererState state,
                             Rectangle2D dataArea,
                             CategoryPlot plot,
                             CategoryAxis domainAxis,
                             ValueAxis rangeAxis,
                             GanttCategoryDataset dataset,
                             int row,
                             int column) {

<span class="fc" id="L264">        int count = dataset.getSubIntervalCount(row, column);</span>
<span class="pc bpc" id="L265" title="1 of 2 branches missed.">        if (count == 0) {</span>
<span class="fc" id="L266">            drawTask(g2, state, dataArea, plot, domainAxis, rangeAxis,</span>
                    dataset, row, column);
        }

<span class="fc" id="L270">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="pc bpc" id="L271" title="1 of 2 branches missed.">        for (int subinterval = 0; subinterval &lt; count; subinterval++) {</span>

<span class="nc" id="L273">            RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

            // value 0
<span class="nc" id="L276">            Number value0 = dataset.getStartValue(row, column, subinterval);</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">            if (value0 == null) {</span>
<span class="nc" id="L278">                return;</span>
            }
<span class="nc" id="L280">            double translatedValue0 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L281">                    value0.doubleValue(), dataArea, rangeAxisLocation);</span>

            // value 1
<span class="nc" id="L284">            Number value1 = dataset.getEndValue(row, column, subinterval);</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">            if (value1 == null) {</span>
<span class="nc" id="L286">                return;</span>
            }
<span class="nc" id="L288">            double translatedValue1 = rangeAxis.valueToJava2D(</span>
<span class="nc" id="L289">                    value1.doubleValue(), dataArea, rangeAxisLocation);</span>

<span class="nc bnc" id="L291" title="All 2 branches missed.">            if (translatedValue1 &lt; translatedValue0) {</span>
<span class="nc" id="L292">                double temp = translatedValue1;</span>
<span class="nc" id="L293">                translatedValue1 = translatedValue0;</span>
<span class="nc" id="L294">                translatedValue0 = temp;</span>
            }

<span class="nc" id="L297">            double rectStart = calculateBarW0(plot, plot.getOrientation(),</span>
                    dataArea, domainAxis, state, row, column);
<span class="nc" id="L299">            double rectLength = Math.abs(translatedValue1 - translatedValue0);</span>
<span class="nc" id="L300">            double rectBreadth = state.getBarWidth();</span>

            // DRAW THE BARS...
<span class="nc" id="L303">            Rectangle2D bar = null;</span>
<span class="nc" id="L304">            RectangleEdge barBase = null;</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L306">                bar = new Rectangle2D.Double(translatedValue0, rectStart,</span>
                        rectLength, rectBreadth);
<span class="nc" id="L308">                barBase = RectangleEdge.LEFT;</span>
            }
<span class="nc bnc" id="L310" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L311">                bar = new Rectangle2D.Double(rectStart, translatedValue0,</span>
                        rectBreadth, rectLength);
<span class="nc" id="L313">                barBase = RectangleEdge.BOTTOM;</span>
            }

<span class="nc" id="L316">            Rectangle2D completeBar = null;</span>
<span class="nc" id="L317">            Rectangle2D incompleteBar = null;</span>
<span class="nc" id="L318">            Number percent = dataset.getPercentComplete(row, column,</span>
                    subinterval);
<span class="nc" id="L320">            double start = getStartPercent();</span>
<span class="nc" id="L321">            double end = getEndPercent();</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">            if (percent != null) {</span>
<span class="nc" id="L323">                double p = percent.doubleValue();</span>
<span class="nc bnc" id="L324" title="All 2 branches missed.">                if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L325">                    completeBar = new Rectangle2D.Double(translatedValue0,</span>
                            rectStart + start * rectBreadth, rectLength * p,
                            rectBreadth * (end - start));
<span class="nc" id="L328">                    incompleteBar = new Rectangle2D.Double(translatedValue0</span>
                            + rectLength * p, rectStart + start * rectBreadth,
                            rectLength * (1 - p), rectBreadth * (end - start));
                }
<span class="nc bnc" id="L332" title="All 2 branches missed.">                else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L333">                    completeBar = new Rectangle2D.Double(rectStart + start</span>
                            * rectBreadth, translatedValue0 + rectLength
                            * (1 - p), rectBreadth * (end - start),
                            rectLength * p);
<span class="nc" id="L337">                    incompleteBar = new Rectangle2D.Double(rectStart + start</span>
                            * rectBreadth, translatedValue0, rectBreadth
                            * (end - start), rectLength * (1 - p));
                }

            }

<span class="nc bnc" id="L344" title="All 2 branches missed.">            if (getShadowsVisible()) {</span>
<span class="nc" id="L345">                getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
                        barBase, true);
            }
<span class="nc" id="L348">            getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="nc bnc" id="L350" title="All 2 branches missed.">            if (completeBar != null) {</span>
<span class="nc" id="L351">                g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L352">                g2.fill(completeBar);</span>
            }
<span class="nc bnc" id="L354" title="All 2 branches missed.">            if (incompleteBar != null) {</span>
<span class="nc" id="L355">                g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L356">                g2.fill(incompleteBar);</span>
            }
<span class="nc bnc" id="L358" title="All 2 branches missed.">            if (isDrawBarOutline()</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">                    &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L360">                g2.setStroke(getItemStroke(row, column));</span>
<span class="nc" id="L361">                g2.setPaint(getItemOutlinePaint(row, column));</span>
<span class="nc" id="L362">                g2.draw(bar);</span>
            }

<span class="nc bnc" id="L365" title="All 2 branches missed.">            if (subinterval == count - 1) {</span>
                // submit the current data point as a crosshair candidate
<span class="nc" id="L367">                int datasetIndex = plot.indexOf(dataset);</span>
<span class="nc" id="L368">                Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="nc" id="L369">                Comparable rowKey = dataset.getRowKey(row);</span>
<span class="nc" id="L370">                double xx = domainAxis.getCategorySeriesMiddle(columnKey,</span>
<span class="nc" id="L371">                        rowKey, dataset, getItemMargin(), dataArea,</span>
<span class="nc" id="L372">                        plot.getDomainAxisEdge());</span>
<span class="nc" id="L373">                updateCrosshairValues(state.getCrosshairState(),</span>
<span class="nc" id="L374">                        dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="nc" id="L375">                        value1.doubleValue(), datasetIndex, xx,</span>
                        translatedValue1, orientation);

            }
            // collect entity and tool tip information...
<span class="nc bnc" id="L380" title="All 2 branches missed.">            if (state.getInfo() != null) {</span>
<span class="nc" id="L381">                EntityCollection entities = state.getEntityCollection();</span>
<span class="nc bnc" id="L382" title="All 2 branches missed.">                if (entities != null) {</span>
<span class="nc" id="L383">                    addItemEntity(entities, dataset, row, column, bar);</span>
                }
            }
        }
<span class="fc" id="L387">    }</span>

    /**
     * Draws a single task.
     *
     * @param g2  the graphics device.
     * @param state  the renderer state.
     * @param dataArea  the data plot area.
     * @param plot  the plot.
     * @param domainAxis  the domain axis.
     * @param rangeAxis  the range axis.
     * @param dataset  the data.
     * @param row  the row index (zero-based).
     * @param column  the column index (zero-based).
     */
    protected void drawTask(Graphics2D g2,
                            CategoryItemRendererState state,
                            Rectangle2D dataArea,
                            CategoryPlot plot,
                            CategoryAxis domainAxis,
                            ValueAxis rangeAxis,
                            GanttCategoryDataset dataset,
                            int row,
                            int column) {

<span class="fc" id="L412">        PlotOrientation orientation = plot.getOrientation();</span>
<span class="fc" id="L413">        RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();</span>

        // Y0
<span class="fc" id="L416">        Number value0 = dataset.getEndValue(row, column);</span>
<span class="pc bpc" id="L417" title="1 of 2 branches missed.">        if (value0 == null) {</span>
<span class="nc" id="L418">            return;</span>
        }
<span class="fc" id="L420">        double java2dValue0 = rangeAxis.valueToJava2D(value0.doubleValue(),</span>
                dataArea, rangeAxisLocation);

        // Y1
<span class="fc" id="L424">        Number value1 = dataset.getStartValue(row, column);</span>
<span class="pc bpc" id="L425" title="1 of 2 branches missed.">        if (value1 == null) {</span>
<span class="nc" id="L426">            return;</span>
        }
<span class="fc" id="L428">        double java2dValue1 = rangeAxis.valueToJava2D(value1.doubleValue(),</span>
                dataArea, rangeAxisLocation);

<span class="fc bfc" id="L431" title="All 2 branches covered.">        if (java2dValue1 &lt; java2dValue0) {</span>
<span class="fc" id="L432">            double temp = java2dValue1;</span>
<span class="fc" id="L433">            java2dValue1 = java2dValue0;</span>
<span class="fc" id="L434">            java2dValue0 = temp;</span>
<span class="fc" id="L435">            value1 = value0;</span>
        }

<span class="fc" id="L438">        double rectStart = calculateBarW0(plot, orientation, dataArea,</span>
                domainAxis, state, row, column);
<span class="fc" id="L440">        double rectBreadth = state.getBarWidth();</span>
<span class="fc" id="L441">        double rectLength = Math.abs(java2dValue1 - java2dValue0);</span>

<span class="fc" id="L443">        Rectangle2D bar = null;</span>
<span class="fc" id="L444">        RectangleEdge barBase = null;</span>
<span class="pc bpc" id="L445" title="1 of 2 branches missed.">        if (orientation == PlotOrientation.HORIZONTAL) {</span>
<span class="fc" id="L446">            bar = new Rectangle2D.Double(java2dValue0, rectStart, rectLength,</span>
                    rectBreadth);
<span class="fc" id="L448">            barBase = RectangleEdge.LEFT;</span>
        }
<span class="nc bnc" id="L450" title="All 2 branches missed.">        else if (orientation == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L451">            bar = new Rectangle2D.Double(rectStart, java2dValue1, rectBreadth,</span>
                    rectLength);
<span class="nc" id="L453">            barBase = RectangleEdge.BOTTOM;</span>
        }

<span class="fc" id="L456">        Rectangle2D completeBar = null;</span>
<span class="fc" id="L457">        Rectangle2D incompleteBar = null;</span>
<span class="fc" id="L458">        Number percent = dataset.getPercentComplete(row, column);</span>
<span class="fc" id="L459">        double start = getStartPercent();</span>
<span class="fc" id="L460">        double end = getEndPercent();</span>
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">        if (percent != null) {</span>
<span class="nc" id="L462">            double p = percent.doubleValue();</span>
<span class="nc bnc" id="L463" title="All 2 branches missed.">            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {</span>
<span class="nc" id="L464">                completeBar = new Rectangle2D.Double(java2dValue0,</span>
                        rectStart + start * rectBreadth, rectLength * p,
                        rectBreadth * (end - start));
<span class="nc" id="L467">                incompleteBar = new Rectangle2D.Double(java2dValue0</span>
                        + rectLength * p, rectStart + start * rectBreadth,
                        rectLength * (1 - p), rectBreadth * (end - start));
            }
<span class="nc bnc" id="L471" title="All 2 branches missed.">            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {</span>
<span class="nc" id="L472">                completeBar = new Rectangle2D.Double(rectStart + start</span>
                        * rectBreadth, java2dValue1 + rectLength * (1 - p),
                        rectBreadth * (end - start), rectLength * p);
<span class="nc" id="L475">                incompleteBar = new Rectangle2D.Double(rectStart + start</span>
                        * rectBreadth, java2dValue1, rectBreadth * (end
                        - start), rectLength * (1 - p));
            }

        }

<span class="pc bpc" id="L482" title="1 of 2 branches missed.">        if (getShadowsVisible()) {</span>
<span class="nc" id="L483">            getBarPainter().paintBarShadow(g2, this, row, column, bar,</span>
                    barBase, true);
        }
<span class="fc" id="L486">        getBarPainter().paintBar(g2, this, row, column, bar, barBase);</span>

<span class="pc bpc" id="L488" title="1 of 2 branches missed.">        if (completeBar != null) {</span>
<span class="nc" id="L489">            g2.setPaint(getCompletePaint());</span>
<span class="nc" id="L490">            g2.fill(completeBar);</span>
        }
<span class="pc bpc" id="L492" title="1 of 2 branches missed.">        if (incompleteBar != null) {</span>
<span class="nc" id="L493">            g2.setPaint(getIncompletePaint());</span>
<span class="nc" id="L494">            g2.fill(incompleteBar);</span>
        }

        // draw the outline...
<span class="pc bpc" id="L498" title="1 of 2 branches missed.">        if (isDrawBarOutline()</span>
<span class="nc bnc" id="L499" title="All 2 branches missed.">                &amp;&amp; state.getBarWidth() &gt; BAR_OUTLINE_WIDTH_THRESHOLD) {</span>
<span class="nc" id="L500">            Stroke stroke = getItemOutlineStroke(row, column);</span>
<span class="nc" id="L501">            Paint paint = getItemOutlinePaint(row, column);</span>
<span class="nc bnc" id="L502" title="All 4 branches missed.">            if (stroke != null &amp;&amp; paint != null) {</span>
<span class="nc" id="L503">                g2.setStroke(stroke);</span>
<span class="nc" id="L504">                g2.setPaint(paint);</span>
<span class="nc" id="L505">                g2.draw(bar);</span>
            }
        }

<span class="fc" id="L509">        CategoryItemLabelGenerator generator = getItemLabelGenerator(row,</span>
                column);
<span class="pc bpc" id="L511" title="3 of 4 branches missed.">        if (generator != null &amp;&amp; isItemLabelVisible(row, column)) {</span>
<span class="nc" id="L512">            drawItemLabel(g2, dataset, row, column, plot, generator, bar,</span>
                    false);
        }

        // submit the current data point as a crosshair candidate
<span class="fc" id="L517">        int datasetIndex = plot.indexOf(dataset);</span>
<span class="fc" id="L518">        Comparable columnKey = dataset.getColumnKey(column);</span>
<span class="fc" id="L519">        Comparable rowKey = dataset.getRowKey(row);</span>
<span class="fc" id="L520">        double xx = domainAxis.getCategorySeriesMiddle(columnKey, rowKey,</span>
<span class="fc" id="L521">                dataset, getItemMargin(), dataArea, plot.getDomainAxisEdge());</span>
<span class="fc" id="L522">        updateCrosshairValues(state.getCrosshairState(),</span>
<span class="fc" id="L523">                dataset.getRowKey(row), dataset.getColumnKey(column),</span>
<span class="fc" id="L524">                value1.doubleValue(), datasetIndex, xx, java2dValue1,</span>
                orientation);

        // collect entity and tool tip information...
<span class="fc" id="L528">        EntityCollection entities = state.getEntityCollection();</span>
<span class="pc bpc" id="L529" title="1 of 2 branches missed.">        if (entities != null) {</span>
<span class="nc" id="L530">            addItemEntity(entities, dataset, row, column, bar);</span>
        }
<span class="fc" id="L532">    }</span>

    /**
     * Returns the Java2D coordinate for the middle of the specified data item.
     *
     * @param rowKey  the row key.
     * @param columnKey  the column key.
     * @param dataset  the dataset.
     * @param axis  the axis.
     * @param area  the drawing area.
     * @param edge  the edge along which the axis lies.
     *
     * @return The Java2D coordinate.
     *
     * @since 1.0.11
     */
    @Override
    public double getItemMiddle(Comparable rowKey, Comparable columnKey,
            CategoryDataset dataset, CategoryAxis axis, Rectangle2D area,
            RectangleEdge edge) {
<span class="nc" id="L552">        return axis.getCategorySeriesMiddle(columnKey, rowKey, dataset,</span>
<span class="nc" id="L553">                getItemMargin(), area, edge);</span>
    }

    /**
     * Tests this renderer for equality with an arbitrary object.
     *
     * @param obj  the object ({@code null} permitted).
     *
     * @return A boolean.
     */
    @Override
    public boolean equals(Object obj) {
<span class="pc bpc" id="L565" title="1 of 2 branches missed.">        if (obj == this) {</span>
<span class="nc" id="L566">            return true;</span>
        }
<span class="pc bpc" id="L568" title="1 of 2 branches missed.">        if (!(obj instanceof GanttRenderer)) {</span>
<span class="nc" id="L569">            return false;</span>
        }
<span class="fc" id="L571">        GanttRenderer that = (GanttRenderer) obj;</span>
<span class="fc bfc" id="L572" title="All 2 branches covered.">        if (!PaintUtils.equal(this.completePaint, that.completePaint)) {</span>
<span class="fc" id="L573">            return false;</span>
        }
<span class="fc bfc" id="L575" title="All 2 branches covered.">        if (!PaintUtils.equal(this.incompletePaint, that.incompletePaint)) {</span>
<span class="fc" id="L576">            return false;</span>
        }
<span class="fc bfc" id="L578" title="All 2 branches covered.">        if (this.startPercent != that.startPercent) {</span>
<span class="fc" id="L579">            return false;</span>
        }
<span class="fc bfc" id="L581" title="All 2 branches covered.">        if (this.endPercent != that.endPercent) {</span>
<span class="fc" id="L582">            return false;</span>
        }
<span class="fc" id="L584">        return super.equals(obj);</span>
    }

    /**
     * Provides serialization support.
     *
     * @param stream  the output stream.
     *
     * @throws IOException  if there is an I/O error.
     */
    private void writeObject(ObjectOutputStream stream) throws IOException {
<span class="fc" id="L595">        stream.defaultWriteObject();</span>
<span class="fc" id="L596">        SerialUtils.writePaint(this.completePaint, stream);</span>
<span class="fc" id="L597">        SerialUtils.writePaint(this.incompletePaint, stream);</span>
<span class="fc" id="L598">    }</span>

    /**
     * Provides serialization support.
     *
     * @param stream  the input stream.
     *
     * @throws IOException  if there is an I/O error.
     * @throws ClassNotFoundException  if there is a classpath problem.
     */
    private void readObject(ObjectInputStream stream)
        throws IOException, ClassNotFoundException {
<span class="fc" id="L610">        stream.defaultReadObject();</span>
<span class="fc" id="L611">        this.completePaint = SerialUtils.readPaint(stream);</span>
<span class="fc" id="L612">        this.incompletePaint = SerialUtils.readPaint(stream);</span>
<span class="fc" id="L613">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>